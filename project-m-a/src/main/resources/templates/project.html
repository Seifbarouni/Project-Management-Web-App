<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" th:href="@{/images/favicon.ico}" /> 
    <title th:text="'üìì '+${title}"></title>
    <link rel="stylesheet" th:href="@{/css/tailwind.css}">
    <link rel="stylesheet" th:href="@{/css/custom.css}">
    <script th:src="@{/js/dragndrop.js}" defer></script>
    <script th:src="@{/js/tasksManip.js}" defer></script>
    <script th:src="@{/js/groupChat.js}" defer></script>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Karla:400,700&display=swap');
        #loading,#group-chat{
            visibility: hidden;
        }
        .font-family-karla{font-family: karla;}
      </style>  
</head>
  <body class="font-family-karla bg-gray-100">
      <div id="loading"  class="fixed top-0 left-0 flex items-center justify-center w-full h-full z-50 " style="background-color: rgba(0,0,0,.5);">
        <img th:src="@{/images/loading2.gif}" alt="loading" height="45px" width="45px">
    </div>
    <div  id="group-chat"  class="fixed top-0 left-0 flex items-center justify-center w-full h-full z-50" style="background-color: rgba(0,0,0,.5);">
        <div class="relative bg-white lg:w-1/2 lg:h-4/5 w-full h-full z-50 rounded">
        <div th:text="'üí¨ Group chat : '+${title}" class="p-2 text-lg font-bold"></div>
        <div id="messages-container"  class="overflow-auto border border-gray-300 bg-gray-100" style="height: 28rem;">
            <div th:if="${messages}!= 'empty'"  th:each="message : ${messages}" class="border-b-2 border-gray-300 text-sm flex">
                <span class="flex-none p-1"><img  class=" h-6 w-6 rounded-full ring-2 ring-white" th:src="@{https://ui-avatars.com/api/?background=random&length=1&name=}+${message.sender}"
                    alt="avatar"></span>
                <div class="flex-1 ml-1">
                 <span class="font-bold text-lg" th:text="${message.sender}+' '"></span><span class="text-xs text-gray-600" th:text="${message.time}"></span>   
                 <div class="pb-1 ml-1" th:text="${message.content}"></div>
                </div>
            </div>
        </div>
        <form id="message-form"  class="flex items-center">
            <input id="message"  placeholder="Send a message" class=" w-full bg-white border-b border-black text-gray-700 py-3 pl-8 pr-8 rounded leading-tight focus:outline-none focus:border-blue-500 placeholder-black self-center">
            <button type="submit"  class="hover:text-blue-500 cursor-pointer focus:outline-none" title="Send">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="22" width="22">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7" />
                </svg>
            </button>
        </form>
        
        <span class="absolute top-0 right-0  cursor-pointer hover:text-gray-700" onclick="closeGroupChat()">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="22" width="22" class="mt-1 mr-1">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
        </span>
        </div>
    </div>
    <nav  x-data="{ isOpen: false }" class="bg-white flex flex-wrap items-center justify-around p-2 border-b flex-col md:flex-row w-full">
        <span class="md:text-xl text-sm  font-bold cursor-pointer">üììProject Management App</span>
        
        <div :class="isOpen ? 'show' : 'hidden'" class="md:text-md text-sm md:flex items-center md:block  md:mt-0">
          <div class="flex flex-col md:flex-row md:ml-6">
            <a th:href="@{/myprojects}" class="p-2 text-center cursor-pointer font-bold hover:text-gray-700">My projects</a>
            <form th:action="@{/logout}" method="post">
                <input  class="px-4 py-2 text-right bg-black hover:bg-gray-700 text-white md:rounded cursor-pointer" type="submit" value="Log outüëã"/>
            </form>
          </div>
      </div>
      <div class="flex md:hidden pt-1 pr-1 absolute top-1 right-1" title="open menu">
        <button type="button" 
        class="text-gray-500 hover:text-gray-600 focus:outline-none focus:text-gray-600" 
        aria-label="toggle menu"
        @click="isOpen = !isOpen">
          <svg viewBox="0 0 24 24" class="h-6 w-6 fill-current">
            <path fill-rule="evenodd" d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"></path>
        </svg>
        </button>
    </div>
    </nav>
    <div th:switch="${error}">
        <div th:case="'NA'">
            <div class="text-red-600 font-bold text-center pt-4">You are not a part of this project or the project does not exist!üòÅ<a class="underline" th:href="@{/myprojects}">Go back</a></div>
        </div>
        <div th:case="*">
            <main th:id="${projectId}" th:class="${username}">
                <div class="">
                    <div class="flex justify-around shadow-md p-2 md:p-4">
                        <div class="flex md:text-sm text-xs flex items-center" x-data="{edit:false}">
                            <div class="mr-4 font-bold" th:text="${title}" x-show="!edit"></div>
                            <form action="" id="edit-project-title" th:if="${username}==${admin}">
                                <input  id="edit_input"  class="mr-4 font-bold placeholder-black w-auto bg-gray-100 border-b border-black" th:value="${title}" x-show="edit" autofocus />
                            </form>
                            <span title="Edit title"  class="cursor-pointer" @click="edit=!edit" th:if="${username}==${admin}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="18" height="18">
                                <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />
                                <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />
                              </svg></span>
                        </div>
                        
                        <div class="flex md:text-sm text-xs items-center">
                            <span class=" px-2 font-bold" th:text="'üëëAdmin : '+${admin}">admin</span>
                            <span class="pr-2">|</span>
                            <span
                              class="tracking-wide inline-block px-2 rounded-full text-xs bg-gray-300 text-gray-600 self-center py-1 cursor-pointer"
                              >#<span th:text="${type}"></span></span
                            >
                        </div>
                    </div>
        
                    <div class="flex ">
        
                        <div class="h-screen flex-none">
                            <nav class="container mx-auto px-4 flex items-center justify-between pt-4" x-data="{ isOpen: false }" 
                            >
                                <div class="flex">                    
                                    <button
                                    @click="isOpen = true" class="focus:outline-none">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                                        <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
                                      </svg>
                                     </button>
                                     
                                </div>
                                <div class="absolute top-0 left-0 bg-white border border-right h-full w-48 opacity-90" x-show="isOpen" 
                                @click.away="isOpen = false"
                                x-transition:enter="transition ease-out duration-300 -ml-64"
                                x-transition:enter-start=""
                                x-transition:enter-end="transform translate-x-64"
                                x-transition:leave="transition ease-out duration-300"
                                x-transition:leave-start=""
                                x-transition:leave-end="transform -translate-x-64"
                                
                                >
                                    <div class="flex justify-end">
                                        <button class="text-2xl mr-3 mt-1 focus:outline-none hover:text-gray-700" @click="isOpen = false">&times;</button>
                                    </div>
                                    <ul>
                                        <li>
                                            <div class="flex flex-col items-center px-3 py-3 cursor-pointer">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="heroicon-ui">
                                                <path fill="#fff" d="M12 14l9-5-9-5-9 5 9 5z" />
                                                <path fill="#fff" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
                                              </svg>
                                                <div>
                                                    Team Members
                                                </div>
                                                <div th:switch="${collaborators}">
                                                    <div th:case="no-col">0</div>
                                                    <div th:case="*" class="flex">
                                                        <div th:each="collaborator :${collaborators}" >

                                                            <img  class="inline-block h-6 w-6 rounded-full ring-1 ring-white" th:src="@{https://ui-avatars.com/api/?background=random&length=1&name=}+'+'+${collaborator}" 
                                                            th:title="${collaborator}"
                                                            alt="">
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                                
                                            </div>
                                           
                                        </li>
                                        <li>
                                            <a th:href="@{/myprofile}" class="flex items-center px-3 py-3 hover:bg-gray-200">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" 
                                                width="24" height="24"
                                                stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                                  </svg>
                                                <span class="ml-2">My profile</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a th:href="@{/personalNotes}" class="flex items-center px-3 py-3 hover:bg-gray-200">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                                                height="24" width="24"
                                                >
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                                                  </svg><span class="ml-2">Personal notes</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a th:href="@{/privacy}" class="flex items-center px-3 py-3 hover:bg-gray-200">
                                                <svg xmlns="http://www.w3.org/2000/svg" 
                                                width="24" height="24"
                                                viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
                                                  </svg>
                                                <span class="ml-2">Privacy policy</span>
                                            </a>
                                        </li>
                                        <li onclick="openGroupChat()">
                                            <span id="grch"  class="flex items-center px-3 py-3 hover:bg-gray-200 cursor-pointer"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                                                width="24" height="24"  
                                                viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" />
                                                  </svg><span class="ml-2">Group chat</span>
                                                </span> 
                                        </li>
                                        
                                        <li>
                                            <form th:action="@{/logout}" method="post">
                                                <button  class="flex items-center px-3 py-3 hover:bg-gray-200 w-full focus:outline-none" type="submit">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                                                width="24" height="24"
                                                viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                                                  </svg>
                                                     <span class="pl-2">Log out</span>
                                                </button>
                                                </form>
                                        </li>
                                    </ul>
                                </div>
                                
                            </nav>
                        </div>
                        <div th:if="${error}=='null'"  class="flex   lg:justify-center pt-2 md:items-start  flex-wrap lg:pl-12 pl-4 flex-1 ">
                            <div class="rounded bg-red-300 flex-shrink-0 w-80 p-2  md:mr-2 shadow-md mb-2">
                                <h3 class="text-sm py-1 font-bold">Tasks</h3>
                                    <div  class="container p-1" id="tasks">
                                        <div th:each="task : ${tasks}"  th:if="${task.isTask}==true"  class="bg-white p-2 text-sm  rounded mt-1 border-b border-grey cursor-pointer hover:bg-gray-100 draggable" draggable="true" th:id="${task.id}" >
                                            <div class="flex" 
                                            x-data="{open : false}"
                                            >
                                                <span th:text="${task.description}" class="flex-1"></span>
                                                <button 
                                                @click="open=!open"
                                                class="focus:outline-none" th:if="${username}==${admin}">
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                                    height="18" width="18"
                                                    class="hover:bg-gray-200"
                                                    >
                                                        <path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" />
                                                      </svg>
                                                </button>
                            <div x-show="open"
                        x-transition:enter="transition-transform transition-opacity ease-out duration-300"
                        x-transition:enter-start="opacity-0 transform -translate-y-2"
                        x-transition:enter-end="opacity-100 transform translate-y-0"
                        x-transition:leave="transition ease-in duration-300"
                        x-transition:leave-end="opacity-0 transform -translate-y-3"
                        @click.away="open = false">
                <ul class="bg-white absolute mt-2 shadow rounded w-auto py-1">
                        <div x-data="{popup:false}" id="edit-task">
                            <li class="py-1 px-3 block hover:bg-blue-100 flex text-blue-700" @click="popup=true">
                                <span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="20" width="20">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg></span> edit</li>
                                <div
                                class="fixed top-0 left-0 flex items-center justify-center w-full h-full z-50 " style="background-color: rgba(0,0,0,.5);"
                                x-show="popup"
                                x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 transform scale-90" 
                                x-transition:enter-end="opacity-100 transform scale-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-90"
                           >
                           <div class="bg-white flex flex-col p-2 rounded-md" @click.away="popup = false">
                            <div class="flex justify-between items-center border-b text-xl">
                                <h6 class="text-md font-bold">üñãÔ∏èCard Edit</h6>
                                <button class="text-2xl mb-2  focus:outline-none hover:text-gray-700" @click="popup = false">&times;</button>
                            </div>
                            <div class="p-1">
                              <h4 class="font-bold p-1">Click below to change the decription of the card</h4>
                              <form class="edt" th:id="${task.id}">
                                  <label for="inpt"></label>
                                <input type="text" th:value="${task.description}" class="w-full px-3 py-2 border border-gray-300 text-gray-900  focus:outline-none focus:ring-black focus:border-black focus:z-10 sm:text-sm placeholder-black font-bold" id="inpt">
                                <button type="submit" class="flex p-2 pl-2 text-center focus:outline-none" @click="popup=false">
                                  <span class="font-bold pr-1">Edit card</span>
                                 <span>
                                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                     height="20" width="20"
                                     >
                                         <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                       </svg>
                                 </span> 
                                </button>
                              </form>
                               
                            </div>
                           </div>
                               
                         </div>
                    </div>
                
                <li class="py-1 px-3 block hover:bg-red-100 flex  text-red-700 del" th:id="${task.id}">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"height="20" width="20" >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>delete</li>
                    </ul></div>
                                             </div>
                                            
                                        </div>
                                        
                                    </div>
                                
                                   <form action="" class="form flex" id="tasks_form">
                                       <label for="input-1"></label>
                                    <textarea cols="31" rows="3" class="mt-3 ml-2 px-2 bg-red-300 text-sm placeholder-black focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Add a card..." name="input" id="input-1"></textarea>
                                    <label for="submit-1"></label>
                                    <button type="submit" class="text-xs relative top-1 focus:outline-none" id="submit-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="26" height="26"
                                        >
                                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                                      </svg></button>
                                   </form>
                                
                            </div>
                            <div class="rounded bg-yellow-200 flex-shrink-0 w-80 p-2  md:mr-2 shadow-md mb-2">
    <h3 class="text-sm font-bold py-1">In progress</h3>
    <div  class="container p-1" id="In progress">
    <div th:each="task : ${tasks}"  th:if="${task.isInProgress}==true"  class="bg-white p-2 text-sm  rounded mt-1 border-b border-grey cursor-pointer hover:bg-gray-100 draggable" draggable="true" th:id="${task.id}">
    <div class="flex" x-data="{open : false}">
<span th:text="${task.description}" class="flex-1"></span>
    <button  @click="open=!open" class="focus:outline-none" th:if="${username}==${admin}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"height="18" width="18"
 class="hover:bg-gray-200"><path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" /></svg>
         </button>
        <div x-show="open"x-transition:enter="transition-transform transition-opacity ease-out duration-300" x-transition:enter-start="opacity-0 transform -translate-y-2" x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-end="opacity-0 transform -translate-y-3" @click.away="open = false"><ul class="bg-white absolute mt-2 shadow rounded w-auto py-1"> <div x-data="{popup:false}" id="edit-inprogress"> <li class="py-1 px-3 block hover:bg-blue-100 flex text-blue-700" @click="popup=true"><span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="20" width="20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg></span> edit</li><div class="fixed top-0 left-0 flex items-center justify-center w-full h-full z-50 " style="background-color: rgba(0,0,0,.5);"
        x-show="popup" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 transform scale-90" x-transition:enter-end="opacity-100 transform scale-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-90"> <div class="bg-white flex flex-col p-2 rounded-md" @click.away="popup = false"><div class="flex justify-between items-center border-b text-xl">
 <h6 class="text-md font-bold">üñãÔ∏èCard Edit</h6><button class="text-2xl mb-2  focus:outline-none hover:text-gray-700" @click="popup = false">&times;</button>
 </div> <div class="p-1"> <h4 class="font-bold p-1">Click below to change the decription of the card</h4> <form class="edt" th:id="${task.id}"><label for="inpt"></label> <input type="text" th:value="${task.description}" class="w-full px-3 py-2 border border-gray-300 text-gray-900  focus:outline-none focus:ring-black focus:border-black focus:z-10 sm:text-sm placeholder-black font-bold" id="inpt"><button type="submit" class="flex p-2 pl-2 text-center focus:outline-none" @click="popup=false"> <span class="font-bold pr-1">Edit card</span> <span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" /></svg></span> </button>
 </form></div></div> </div> </div> <li class="py-1 px-3 block hover:bg-red-100 flex  text-red-700 del" th:id="${task.id}"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"height="20" width="20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                                              </svg>
                                                            delete</li>
                                                    </ul>
                                                </div>
                                            </div>
                                    </div>
                                </div>
                                <form action="" class="form flex" id="in_progress_form">
                                    <label for="input-2"></label>
                                    <textarea cols="31" rows="3" class="mt-3 ml-2 px-2 bg-yellow-200 text-sm placeholder-black  focus:outline-none focus:ring-2 focus:ring-yellow-500" placeholder="Add a card..." name="input" id="input-2"></textarea>
                                    <label for="button-2"></label>
                                    <button type="submit" class="text-xs relative top-1 focus:outline-none" id="submit-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="26" height="26">
                                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                                      </svg></button>
                                   </form>
                            </div>
                            <div class="rounded bg-purple-300 flex-shrink-0 w-80 p-2 md:mr-2 shadow-md mb-2">
                                <h3 class="text-sm font-bold py-1">In review</h3>
                                <div  class="container p-1" id="In review">
                                    <div th:each="task : ${tasks}"  th:if="${task.isInReview}==true"  class="bg-white p-2 text-sm  rounded mt-1 border-b border-grey cursor-pointer hover:bg-gray-100 draggable" draggable="true" th:id="${task.id}">
                                        <div class="flex" 
                                            x-data="{open : false}"
                                            >
                                                <span th:text="${task.description}" class="flex-1"></span>
                                                <button 
                                                @click="open=!open"
                                                class="focus:outline-none"
                                                th:if="${username}==${admin}"
                                                >
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                                    height="18" width="18"
                                                    class="hover:bg-gray-200"
                                                    >
                                                        <path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" />
                                                      </svg>
                                                </button>
<div x-show="open" x-transition:enter="transition-transform transition-opacity ease-out duration-300"x-transition:enter-start="opacity-0 transform -translate-y-2" x-transition:enter-end="opacity-100 transform translate-y-0"
 x-transition:leave="transition ease-in duration-300" x-transition:leave-end="opacity-0 transform -translate-y-3"@click.away="open = false">
  <ul class="bg-white absolute mt-2 shadow rounded w-auto py-1">
 <div x-data="{popup:false}" id="edit-inreview"> <li class="py-1 px-3 block hover:bg-blue-100 flex text-blue-700" @click="popup=true"><span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="20" width="20"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg></span> edit</li><div class="fixed top-0 left-0 flex items-center justify-center w-full h-full z-50 " style="background-color: rgba(0,0,0,.5);"x-show="popup"
x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 transform scale-90"  x-transition:enter-end="opacity-100 transform scale-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-90"> <div class="bg-white flex flex-col p-2 rounded-md" @click.away="popup = false"><div class="flex justify-between items-center border-b text-xl"><h6 class="text-md font-bold">üñãÔ∏èCard Edit</h6><button class="text-2xl mb-2  focus:outline-none hover:text-gray-700" @click="popup = false">&times;</button> </div><div class="p-1"><h4 class="font-bold p-1">Click below to change the decription of the card</h4><form class="edt" th:id="${task.id}"><label for="inpt"></label>
 <input type="text" th:value="${task.description}" class="w-full px-3 py-2 border border-gray-300 text-gray-900  focus:outline-none focus:ring-black focus:border-black focus:z-10 sm:text-sm placeholder-black font-bold" id="inpt"> <button type="submit" class="flex p-2 pl-2 text-center focus:outline-none" @click="popup=false"> <span class="font-bold pr-1">Edit card</span> <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20" > <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" /></svg></span> </button></form></div></div></div>
</div><li class="py-1 px-3 block hover:bg-red-100 flex  text-red-700 del" th:id="${task.id}"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"height="20" width="20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg> delete</li></ul> </div>
                                            </div>
                                    </div>
                                </div>
                                <form action="" class="form flex" id="in_review_form">
                                    <label for="input-3"></label>
                                    <textarea cols="31" rows="3" class="mt-3 ml-2 px-2 bg-purple-300 text-sm placeholder-black  focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Add a card..." name="input" id="input-3"></textarea>
                                    <label for="submit-3"></label>
                                    <button type="submit" class="text-xs relative top-1 focus:outline-none" id="submit-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="26" height="26">
                                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                                      </svg></button>
                                   </form>
                            </div>
                            <div class="rounded bg-green-300 flex-shrink-0 w-80 p-2 md:mr-2 shadow-md mb-2">
                                <h3 class="text-sm font-bold py-1">Done</h3>
                                <div  class="container p-1" id="Done">
                                    <div th:each="task : ${tasks}"  th:if="${task.isDone}==true"  class="bg-white p-2 text-sm  rounded mt-1 border-b border-grey cursor-pointer hover:bg-gray-100 draggable" draggable="true" th:id="${task.id}">
                                        <div class="flex" 
                                        x-data="{open : false}"
                                        >
                                            <span th:text="${task.description}" class="flex-1"></span>
                                            <button 
                                            @click="open=!open"
                                            class="focus:outline-none"
                                            th:if="${username}==${admin}"
                                            >
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                                height="18" width="18"
                                                class="hover:bg-gray-200"
                                                >
                                                    <path d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" />
                                                  </svg>
                                            </button>
                                            <div x-show="open"
                                            x-transition:enter="transition-transform transition-opacity ease-out duration-300"
                                            x-transition:enter-start="opacity-0 transform -translate-y-2"
                                            x-transition:enter-end="opacity-100 transform translate-y-0"
                                            x-transition:leave="transition ease-in duration-300"
                                            x-transition:leave-end="opacity-0 transform -translate-y-3"
                                            @click.away="open = false"
                                            >
                                                <ul class="bg-white absolute mt-2 shadow rounded w-auto py-1 ">
                                                    
<div x-data="{popup:false}" id="edit-done"><li class="py-1 px-3 block hover:bg-blue-100 flex text-blue-700" @click="popup=true"><span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="20" width="20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg></span> edit</li> <div class="fixed top-0 left-0 flex items-center justify-center w-full h-full z-50 " style="background-color: rgba(0,0,0,.5);"x-show="popup"
x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 transform scale-90" x-transition:enter-end="opacity-100 transform scale-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-90"><div class="bg-white flex flex-col p-2 rounded-md" @click.away="popup = false"><div class="flex justify-between items-center border-b text-xl"> <h6 class="text-md font-bold">üñãÔ∏èCard Edit</h6> <button class="text-2xl mb-2  focus:outline-none hover:text-gray-700" @click="popup = false">&times;</button>
 </div> <div class="p-1"> <h4 class="font-bold p-1">Click below to change the decription of the card</h4> <form class="edt" th:id="${task.id}">
 <label for="inpt"></label><input type="text" th:value="${task.description}" class="w-full px-3 py-2 border border-gray-300 text-gray-900  focus:outline-none focus:ring-black focus:border-black focus:z-10 sm:text-sm placeholder-black font-bold" id="inpt"> <button type="submit" class="flex p-2 pl-2 text-center focus:outline-none" @click="popup=false"><span class="font-bold pr-1">Edit card</span> <span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="20" width="20"
 > <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" /></svg>
</span> </button> </form> </div> </div> </div></div><li class="py-1 px-3 block hover:bg-red-100 flex  text-red-700 del" th:id="${task.id}"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
height="20" width="20"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                                          </svg>
                                                        delete</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <form action="" class="form flex" id="done_form">
                                    <label for="input-4"></label>
                                    <textarea cols="31" rows="3" class="mt-3 ml-2 px-2 bg-green-300 text-sm placeholder-black  focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Add a card..." name="input" id="input-4"></textarea>
                                    <label for="submit-4"></label>
                                    <button type="submit" class="text-xs relative top-1 focus:outline-none" id="submit-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="26" height="26">
                                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                                      </svg></button>
                                </form>
                            </div>
                        </div>
                        <div th:if="${error}!='null'" class="text-red-700 font-bold">
                            A problem has occured.<a href="#" onclick="location.reload();" class="underline">Reload page</a>
                        </div>
                </div>
                
              </div>
            </main>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.0/sockjs.min.js" integrity="sha512-5yJ548VSnLflcRxWNqVWYeQZnby8D8fJTmYRLyvs445j1XmzR8cnWi85lcHx3CUEeAX+GrK3TqTfzOO6LKDpdw==" crossorigin="anonymous"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js" integrity="sha512-iKDtgDyTHjAitUDdLljGhenhPwrbBfqTKWO1mkhSFH3A7blITC9MhYon6SjnMhp4o0rADGw9yAC6EW4t5a4K3g==" crossorigin="anonymous"></script>
  </body>
</html>